<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>TrendCurator — Archive</title>
  <style>
    body{background:#0f1113;color:#e9edf0;font-family:Inter,system-ui, -apple-system; padding:28px}
    a{color:#5fb3c8}
    .wrap{max-width:900px;margin:0 auto}
    h1{font-size:20px}
    .item{background:#15171a;padding:14px;border-radius:10px;border:1px solid #202326;margin-top:12px}
    .muted{color:#9da6ad}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>TrendCurator — Archive</h1>
    <p class="muted">Past picks — latest first. Click a title to open the product.</p>
    <div id="list"></div>
  </div>
<script>
async function load(){
  try{
    const res = await fetch('/issues');
    const issues = await res.json();
    const list = document.getElementById('list');
    if(!issues.length){ list.innerHTML = '<p class="muted">No issues published yet.</p>'; return; }
    list.innerHTML = '';
    issues.forEach(i=>{
      const d = new Date(i.ts);
      const el = document.createElement('div'); el.className='item';
      el.innerHTML = `<div style="display:flex;justify-content:space-between"><a href="${i.link||'#'}" target="_blank" rel="noopener noreferrer">${i.title}</a><div class="muted">${d.toLocaleString()}</div></div><div class="muted" style="margin-top:8px">${i.reason}</div>`;
      list.appendChild(el);
    });
  }catch(e){ document.getElementById('list').innerHTML = '<p class="muted">Failed to load archive.</p>'; }
}
load();
</script>
</body>
</html>